# COMPASS MVP PRD

## 🎯 핵심 정보

**목적**: 학원이 AI로 학교별 맞춤 예상시험을 생성하고 학생 취약점을 분석하는 플랫폼
**사용자**: 중등 수학을 가르치는 소형~중형 보습학원 (교사, 학원 관리자, 학생)

## 🚶 사용자 여정

```
[로그인 페이지] → 로그인 성공 → [대시보드] → 역할별 분기

── 교사 흐름 ──
문제 생성 → 문제 검수 → 시험 생성 → PDF 출력
→ 학생 종이 배포 → 답안 수거 → 채점 검수 → 오답 분석

── 학생 흐름 ──
내 시험 확인 → 답안 제출 (사진 촬영) → 채점 결과 확인 → 오답 노트

── 관리자 흐름 ──
학원 설정 → 학교/학생/교사 관리 → 학습목표 관리
```

## ⚡ 기능 명세

> 기능 ID는 [PRD-v0.1-detailed.md](./prd/PRD-v0.1-detailed.md)의 ID 체계를 따름

### 1. 핵심 기능

| ID | 기능명 | 설명 | 관련 페이지 |
|----|--------|------|-------------|
| **F001** | AI 문제 출제 (학년/단원) | 학년/단원 기반 AI 문제 생성 | 문제 생성 페이지 |
| **F003** | 성취기준 기반 AI 출제 | 성취기준 기반 AI 문제 생성 | 문제 생성 페이지 |
| **F004** | AI 문제 검수 | AI 생성 문제 승인/반려/수정 | 문제 검수 페이지 |
| **F011** | 기출 참고 AI 출제 | 학교 기출 분석 기반 AI 출제 | 문제 생성 페이지 |
| **F012** | 학교별 예상시험 생성 | 학습목표 + 기출 분석으로 시험 구성 | 시험 생성 페이지 |
| **F013** | 시험지 PDF 출력 | 종이 시험지용 PDF 생성 | 시험 상세 페이지 |
| **F014** | 답안지 촬영/제출 | 풀이한 답안지 사진 업로드 | 답안 제출 페이지 |
| **F015** | AI 이미지 인식 채점 | 촬영된 답안 이미지 AI 채점 | 채점 결과 페이지 |
| **F016** | 교사 채점 검수 | AI 채점 결과 교사 확인/수정 | 채점 검수 페이지 |
| **F017** | 오답 분석/취약점 | 학생별 취약점 파악 | 오답 노트 페이지 |
| **F018** | 역할별 대시보드 | 학생/교사/관리자별 현황 요약 | 대시보드 |

### 2. 지원 기능

| ID | 기능명 | 설명 | 관련 페이지 |
|----|--------|------|-------------|
| **F002** | 성취기준 관리 | 교육부 학습목표 등록/조회 | 학습목표 관리 페이지 |
| **F005** | 기출문제 등록 | 이미지 업로드 + OCR 추출 | 기출문제 관리 페이지 |
| **F006** | 기출문제 메타데이터 | 학교/학년/시험유형/성취기준 연결 | 기출문제 상세 페이지 |
| **F007** | 학교 정보 관리 | 학교 검색, 등록, 정보 관리 | 학교 관리 페이지 |
| **F008** | 학원 등록/관리 | 학원 정보, 설정, 브랜딩 | 학원 설정 페이지 |
| **F009** | 학생/교사 관리 | 사용자 CRUD, 소속 관리, 역할 부여 | 학생/교사 관리 페이지 |
| **F010** | 회원가입/로그인 | 이메일, 소셜 로그인 | 로그인/회원가입 페이지 |

### 3. 이후 기능 (MVP 범위 외)

- 온라인 시험 응시 (F020) -- 종이 시험지로 대체
- 결제 시스템 (F021) -- 수동 청구로 대체
- 학부모 계정/알림 (F022) -- PDF 리포트 공유로 대체
- 교사 출제 성향 분석 (F023)
- 학부모 리포트 PDF (F019) -- MVP 이후 우선순위 높음

## 📱 메뉴 구조

```
📱 COMPASS 내비게이션

├── 🏠 대시보드
│   └── 기능: F018 (역할별 현황 요약)
├── 👤 인증 (비로그인 시)
│   ├── 로그인 - F010
│   └── 회원가입 - F010

👨‍🏫 교사 메뉴 (로그인 후)
├── 📝 문제 생성
│   └── 기능: F001, F003 (AI 문제 생성)
├── ✅ 문제 검수
│   └── 기능: F004 (승인/반려/수정)
├── 📋 시험 관리
│   └── 기능: F012, F013 (시험 생성, PDF 출력)
├── 📊 채점 검수
│   └── 기능: F016 (AI 채점 확인/수정)
├── 📚 기출문제
│   └── 기능: F005, F006 (기출 등록/관리)
└── 👥 학생 관리
    └── 기능: F009 (담당 학생 관리)

👨‍🎓 학생 메뉴 (로그인 후)
├── 📝 내 시험
│   └── 기능: 배정된 시험 목록
├── 📤 답안 제출
│   └── 기능: F014 (답안 촬영/업로드)
├── 📊 채점 결과
│   └── 기능: F015 (결과 확인)
└── 📖 오답 노트
    └── 기능: F017 (오답 분석/복습)

🏢 관리자 메뉴 (로그인 후)
├── ⚙️ 학원 설정
│   └── 기능: F008 (학원 정보 관리)
├── 👥 교사 관리
│   └── 기능: F009 (교사 초대/관리)
├── 👨‍🎓 학생 관리
│   └── 기능: F009 (학생 등록/관리)
└── 📚 학습목표
    └── 기능: F002 (성취기준 관리)

🔧 공통 메뉴
└── 🚪 로그아웃
```

## 📄 페이지별 상세 기능

### 문제 생성 페이지

> **구현 기능:** `F001`, `F003` | **메뉴 위치:** 교사 > 문제 생성

| 항목 | 내용 |
|------|------|
| **역할** | AI를 통한 문제 생성 요청 |
| **진입 경로** | 교사 메뉴에서 "문제 생성" 클릭 |
| **사용자 행동** | 학년/단원/성취기준 선택 → 문제 유형/난이도/개수 설정 → 생성 요청 |
| **주요 기능** | • 학년/단원 트리 선택<br>• 성취기준 선택 (선택적)<br>• 문제 유형 선택 (객관식/단답형/서술형)<br>• **생성** 버튼 |
| **다음 이동** | 생성 완료 → 문제 검수 페이지 |

---

### 문제 검수 페이지

> **구현 기능:** `F004` | **메뉴 위치:** 교사 > 문제 검수

| 항목 | 내용 |
|------|------|
| **역할** | AI 생성 문제 품질 검토 |
| **진입 경로** | 문제 생성 완료 후 자동 이동, 또는 메뉴에서 접근 |
| **사용자 행동** | 문제 내용 확인 → 정확성 검토 → 승인/반려/수정 |
| **주요 기능** | • 문제/정답/해설 미리보기<br>• 수학 수식 렌더링 (LaTeX)<br>• **승인/반려/수정** 버튼 |
| **다음 이동** | 승인 → 문제 DB 저장, 반려 → 반려 목록 |

---

### 시험 생성 페이지

> **구현 기능:** `F012` | **메뉴 위치:** 교사 > 시험 관리

| 항목 | 내용 |
|------|------|
| **역할** | 학교별 맞춤 예상시험 구성 |
| **진입 경로** | 교사 메뉴에서 "시험 관리" 클릭 |
| **사용자 행동** | 대상 학교/학년 선택 → 범위 설정 → 문제 구성 → 시험 생성 |
| **주요 기능** | • 대상 학교/학년 선택<br>• 출제 범위 설정 (단원/성취기준)<br>• 유형별 문제 수/배점 설정<br>• **시험 생성** 버튼 |
| **다음 이동** | 생성 완료 → 시험 상세 페이지 |

---

### 시험 상세 페이지

> **구현 기능:** `F013` | **메뉴 위치:** 시험 관리 > 시험 선택

| 항목 | 내용 |
|------|------|
| **역할** | 시험 정보 확인 및 PDF 출력 |
| **진입 경로** | 시험 생성 완료 후, 또는 시험 목록에서 선택 |
| **사용자 행동** | 시험 내용 확인 → PDF 설정 → 다운로드 → 학생 배포 |
| **주요 기능** | • 시험 정보 요약<br>• 문제 목록 미리보기<br>• PDF 설정 (용지, 로고)<br>• **PDF 다운로드** 버튼 |
| **다음 이동** | 다운로드 완료 → 학생에게 종이 배포 |

---

### 답안 제출 페이지

> **구현 기능:** `F014` | **메뉴 위치:** 학생 > 답안 제출

| 항목 | 내용 |
|------|------|
| **역할** | 풀이한 답안지 사진 제출 |
| **진입 경로** | 학생 메뉴에서 "답안 제출" 클릭 |
| **사용자 행동** | 시험 선택 → 답안지 촬영 → 품질 확인 → 제출 |
| **주요 기능** | • 배정된 시험 목록<br>• 카메라 촬영 (품질 가이드)<br>• 이미지 미리보기<br>• **제출** 버튼 |
| **다음 이동** | 제출 완료 → 채점 대기, 완료 시 채점 결과 페이지 |

---

### 채점 결과/검수 페이지

> **구현 기능:** `F015`, `F016` | **메뉴 위치:** 학생 > 채점 결과, 교사 > 채점 검수

| 항목 | 내용 |
|------|------|
| **역할** | AI 채점 결과 확인 (학생), 검수 및 수정 (교사) |
| **진입 경로** | 채점 완료 알림, 또는 메뉴에서 접근 |
| **사용자 행동** | [학생] 점수/정오표 확인, [교사] AI 판정 검토 → 오버라이드 |
| **주요 기능** | • 총점, 문제별 정오표<br>• AI 신뢰도 표시<br>• [교사] 정답/오답 변경<br>• **확정** 버튼 (교사) |
| **다음 이동** | 확정 완료 → 오답 노트 페이지 |

---

### 오답 노트 페이지

> **구현 기능:** `F017` | **메뉴 위치:** 학생 > 오답 노트

| 항목 | 내용 |
|------|------|
| **역할** | 틀린 문제 복습 및 취약점 확인 |
| **진입 경로** | 채점 완료 후, 또는 학생 메뉴에서 접근 |
| **사용자 행동** | 오답 목록 확인 → 해설 학습 → 복습 완료 체크 |
| **주요 기능** | • 과목/단원별 필터<br>• 오답 카드 (문제, 내 답, 정답, 해설)<br>• 취약 단원 표시<br>• **복습 완료** 체크 |
| **다음 이동** | 계속 복습 또는 대시보드로 이동 |

---

## 🗄️ 데이터 모델

### User (사용자)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| name | 이름 | string |
| email | 이메일 | string |
| role | 역할 (student/teacher/admin) | enum |
| academy_id | 소속 학원 | → Academy.id |

### Academy (학원)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| name | 학원명 | string |
| settings | 설정 (로고 등) | json |

### School (학교)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| name | 학교명 | string |
| type | 학교 유형 (중학교/고등학교) | enum |
| region | 지역 | string |

### Question (문제)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| content | 문제 내용 | text |
| answer | 정답 | string |
| type | 문제 유형 (객관식/단답형/서술형) | enum |
| difficulty | 난이도 (상/중/하) | enum |
| explanation | 해설 | text |
| achievement_standard_id | 성취기준 | → AchievementStandard.id |
| is_ai_generated | AI 생성 여부 | boolean |
| ai_model | AI 모델명 | string |
| ai_prompt | 생성 프롬프트 | text |
| review_status | 검수 상태 | enum |

### Exam (시험)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| title | 시험명 | string |
| school_id | 대상 학교 | → School.id |
| questions | 문제 목록 | → Question[] |

### ExamResult (시험 결과)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| exam_id | 시험 | → Exam.id |
| student_id | 학생 | → User.id |
| score | 점수 | number |
| answer_image | 답안 이미지 | string |
| grading_status | 채점 상태 (대기/AI완료/확정) | enum |

### AchievementStandard (성취기준)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| code | 성취기준 코드 | string |
| content | 내용 | text |
| grade | 학년 | number |

## 🛠️ 기술 스택

> 상세: [기술스택.md](./design/기술스택.md)

### 🎨 프론트엔드 프레임워크
- **Next.js 15** (App Router) - React 풀스택 프레임워크
- **TypeScript 5.6+** - 타입 안전성 보장
- **React 19** - UI 라이브러리

### 🎨 스타일링 & UI
- **TailwindCSS v4** - 유틸리티 CSS 프레임워크
- **shadcn/ui** - React 컴포넌트 라이브러리
- **Lucide React** - 아이콘 라이브러리

### 📝 폼 & 검증
- **React Hook Form 7.x** - 폼 상태 관리
- **Zod** - 스키마 검증 라이브러리

### 🗄️ 백엔드 & 데이터베이스
- **Supabase** - BaaS (인증, 데이터베이스)
- **PostgreSQL** - 관계형 데이터베이스

### 🤖 AI
- **Google Gemini** - AI 문제 생성/채점
- 수학 수식 OCR (Mathpix) -- Phase 3+에서 도입 예정

### 🚀 배포
- **Vercel** - Next.js 최적화 배포

---

> **상세 문서**: [PRD-v0.1-detailed.md](./prd/PRD-v0.1-detailed.md)
