# ë‹¨ê³„ 1-4 Step 3: í•™ì› ê´€ë¦¬ UI ì»´í¬ë„ŒíŠ¸ ìƒì„¸ ê³„íš

> **ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ (2026-02-13)
> **ì‘ì„±ì¼**: 2026-02-13
> **ëª¨ë¸**: Opus 4.6 (ê³„íš), Sonnet 4.5 (êµ¬í˜„ ì˜ˆì •)
> **ì „ì œ ì¡°ê±´**: Step 1 Zod ìŠ¤í‚¤ë§ˆ âœ…, Step 2 Server Actions âœ…
> **ê³„íš ë°©ë²•**: Sequential Thinking MCP 7ë‹¨ê³„ ë¶„ì„

---

## 1. ìš”êµ¬ì‚¬í•­ ì¬ì •ì˜

í•™ì› ê´€ë¦¬ í˜ì´ì§€ëŠ” **ìê¸° í•™ì› 1ê°œë§Œ** ë‹¤ë£¨ëŠ” ë‹¨ì¼ ë ˆì½”ë“œ í˜ì´ì§€:

- **admin/system_admin** â†’ ìˆ˜ì • í¼ (`AcademyForm`)
- **teacher/student** â†’ ì½ê¸° ì „ìš© ì¹´ë“œ (`AcademyInfoCard`)
- ë‘˜ ë‹¤ **invite_code ë³µì‚¬** ê°€ëŠ¥í•´ì•¼ í•¨ (í•™ìƒ ì´ˆëŒ€ë¥¼ ìœ„í•´)

### í•™êµ ê´€ë¦¬(1-3)ì™€ì˜ í•µì‹¬ ì°¨ì´

| í•™êµ ê´€ë¦¬ | í•™ì› ê´€ë¦¬ |
|-----------|-----------|
| ì—¬ëŸ¬ ë ˆì½”ë“œ (DataTable) | **ìê¸° í•™ì› 1ê°œë§Œ** |
| create/edit ë³„ë„ í˜ì´ì§€ | **ë‹¨ì¼ í˜ì´ì§€ì—ì„œ ì¡°íšŒ+ìˆ˜ì •** |
| admin + teacher ëª¨ë‘ ìˆ˜ì • | **adminë§Œ ìˆ˜ì •, teacherëŠ” ì¡°íšŒë§Œ** |
| mode='create'\|'edit' ë¶„ê¸° | **update ì „ìš© (ìƒì„±ì€ system_admin ì˜ì—­)** |
| ì„±ê³µ í›„ ëª©ë¡ í˜ì´ì§€ ì´ë™ | **ê°™ì€ í˜ì´ì§€ì— ë¨¸ë¬´ë¦„** |

---

## 2. íŒŒì¼ êµ¬ì¡°

```
src/app/(dashboard)/admin/academy/
â”œâ”€â”€ page.tsx                        # Server Component (~40ì¤„)
â””â”€â”€ _components/
    â”œâ”€â”€ academy-info-card.tsx       # Client Component (~80ì¤„)
    â””â”€â”€ academy-form.tsx            # Client Component (~120ì¤„)
```

---

## 3. ì„¤ê³„ ê²°ì •

### Sequential Thinking ë¶„ì„ ê²°ê³¼

| # | ê²°ì • ì‚¬í•­ | ì„ íƒ | ê·¼ê±° |
|---|----------|------|------|
| 1 | ì—­í• ë³„ ë¶„ê¸° ìœ„ì¹˜ | Server Component (page.tsx) | í´ë¼ì´ì–¸íŠ¸ì—ì„œ role ì²´í¬í•˜ë©´ DevToolsë¡œ ìš°íšŒ ê°€ëŠ¥ |
| 2 | invite_code í‘œì‹œ | ì–‘ìª½ ì»´í¬ë„ŒíŠ¸ ëª¨ë‘ | teacher/admin ëª¨ë‘ í•™ìƒ ì´ˆëŒ€ì— í•„ìš” |
| 3 | invite_code ê³µí†µ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ | ì•ˆ í•¨ (ì¤‘ë³µ í—ˆìš©) | MVP, ë³µì‚¬ ë¡œì§ 3~5ì¤„ë¡œ ê°„ë‹¨. YAGNI ì›ì¹™ |
| 4 | AcademyInfoCard ì„±ê²© | Client Component | ë³µì‚¬ ë²„íŠ¼ì´ `navigator.clipboard` ì‚¬ìš© |
| 5 | ì„±ê³µ í›„ ë„¤ë¹„ê²Œì´ì…˜ | `router.refresh()` (ê°™ì€ í˜ì´ì§€) | í•™êµ í¼ê³¼ ë‹¬ë¦¬ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™ ë¶ˆí•„ìš” |
| 6 | í¼ ìƒíƒœ ê´€ë¦¬ | `useTransition` (useActionState ë¯¸ì‚¬ìš©) | í•™êµ í¼ê³¼ ë™ì¼ íŒ¨í„´. ì§ì ‘ ê²°ê³¼ í•¸ë“¤ë§ ìš©ì´ |

---

## 4. ì»´í¬ë„ŒíŠ¸ ìƒì„¸ ì„¤ê³„

### 4-1. page.tsx (Server Component)

**ì—­í• **: ë°ì´í„° ì¡°íšŒ + ì—­í•  ê¸°ë°˜ ë¶„ê¸° ë Œë”ë§

```
ë°ì´í„° íë¦„:
getMyAcademy()
  â†’ ì—ëŸ¬ ì‹œ: ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
  â†’ ì„±ê³µ ì‹œ: role í™•ì¸
    â†’ admin/system_admin: <AcademyForm initialData={academy} />
    â†’ teacher/student: <AcademyInfoCard data={academy} />
```

**ì—ëŸ¬ ì²˜ë¦¬**: í•™êµ ê´€ë¦¬ page.tsxì™€ ë™ì¼ íŒ¨í„´ (ì—ëŸ¬ ì¹´ë“œ í‘œì‹œ)

### 4-2. academy-info-card.tsx (Client Component)

**ì—­í• **: teacher/studentìš© ì½ê¸° ì „ìš© í•™ì› ì •ë³´ ì¹´ë“œ

```
Props: { data: AcademyData }

ë ˆì´ì•„ì›ƒ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CardHeader: í•™ì› ì •ë³´               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ í•™ì›ëª…: OOí•™ì›                   â”‚ â”‚
â”‚ â”‚ ì£¼ì†Œ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ...          â”‚ â”‚
â”‚ â”‚ ì „í™”: 02-1234-5678              â”‚ â”‚
â”‚ â”‚ ë¡œê³  URL: https://...           â”‚ â”‚
â”‚ â”‚ ìƒíƒœ: â— í™œì„± (Badge)            â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ ì´ˆëŒ€ ì½”ë“œ: ABC123 [ë³µì‚¬] ë²„íŠ¼    â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ ë“±ë¡ì¼: 2026-01-15              â”‚ â”‚
â”‚ â”‚ ìˆ˜ì •ì¼: 2026-02-12              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**shadcn ì»´í¬ë„ŒíŠ¸**: Card, CardHeader, CardTitle, CardContent, Badge, Button, Separator

**invite_code null ì²˜ë¦¬**: `inviteCode ?? 'ë¯¸ì„¤ì •'` + ë³µì‚¬ ë²„íŠ¼ disabled

### 4-3. academy-form.tsx (Client Component)

**ì—­í• **: adminìš© í•™ì› ì •ë³´ ìˆ˜ì • í¼

```
Props: { initialData: AcademyData }

ë ˆì´ì•„ì›ƒ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Card: í•™ì› ìƒíƒœ                      â”‚
â”‚ â”‚ ì´ˆëŒ€ ì½”ë“œ: ABC123 [ë³µì‚¬] ë²„íŠ¼    â”‚ â”‚
â”‚ â”‚ ìƒíƒœ: â— í™œì„± (Badge)            â”‚ â”‚
â”‚ â”‚ ë“±ë¡ì¼: ... / ìˆ˜ì •ì¼: ...       â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Card: í•™ì› ì •ë³´ ìˆ˜ì •                 â”‚
â”‚ Form (React Hook Form + Zod)       â”‚
â”‚ â”‚ í•™ì›ëª… *: [__________]          â”‚ â”‚
â”‚ â”‚ ì£¼ì†Œ:     [__________]          â”‚ â”‚
â”‚ â”‚ ì „í™”:     [__________]          â”‚ â”‚
â”‚ â”‚ ë¡œê³  URL: [__________]          â”‚ â”‚
â”‚ â”‚               [ì €ì¥] ë²„íŠ¼       â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë°ì´í„° íë¦„**:
```
useForm + zodResolver(academyUpdateSchema)
  â†’ defaultValues: null â†’ '' ë³€í™˜ (DB null â†’ í¼ ë¹ˆ ë¬¸ìì—´)
  â†’ onSubmit:
    1. FormData êµ¬ì„± (name, address, phone, logoUrl)
    2. startTransition â†’ updateMyAcademy(null, formData)
    3. ì„±ê³µ: toast.success + router.refresh()
    4. ì‹¤íŒ¨: toast.error
```

**shadcn ì»´í¬ë„ŒíŠ¸**: Card, CardHeader, CardTitle, CardContent, Form, FormField, FormItem, FormLabel, FormControl, FormMessage, Input, Button, Badge, Separator

**í•™êµ í¼ê³¼ì˜ ì°¨ì´**:
- mode ë¶„ê¸° ì—†ìŒ (update ì „ìš©)
- ID ì „ë‹¬ ë¶ˆí•„ìš” (Server Action ë‚´ë¶€ì—ì„œ profile â†’ academy_id ì¶”ì¶œ)
- ì„±ê³µ í›„ `router.push()` ì—†ìŒ (ê°™ì€ í˜ì´ì§€ ìœ ì§€, `router.refresh()`ë§Œ)

---

## 5. null â†” '' ë³€í™˜ ì™•ë³µ íŒ¨í„´

```
DB (null)
  â†’ getMyAcademy() â†’ AcademyData { address: null }
  â†’ page.tsx â†’ props ì „ë‹¬
  â†’ AcademyForm â†’ defaultValues { address: '' }  (null â†’ '')
  â†’ ì‚¬ìš©ì ìˆ˜ì •
  â†’ onSubmit â†’ FormData { address: '' }
  â†’ updateMyAcademy â†’ Server Action { address: '' || null }  ('' â†’ null)
  â†’ DB (null)
```

---

## 6. ë¦¬ìŠ¤í¬ ë¶„ì„

| ë¦¬ìŠ¤í¬ | ì‹¬ê°ë„ | ëŒ€ì‘ |
|--------|--------|------|
| invite_code ì»¬ëŸ¼ ë¯¸ì¡´ì¬ (00004 ë¯¸ì ìš©) | **ì¤‘ê°„** | null í•¸ë“¤ë§ìœ¼ë¡œ "ë¯¸ì„¤ì •" í‘œì‹œ, ë³µì‚¬ ë²„íŠ¼ disabled |
| Supabase placeholder íƒ€ì… | ë‚®ìŒ | ê¸°ì¡´ `as any` íŒ¨í„´ ìœ ì§€ (Step 2ì—ì„œ ì ìš© ì™„ë£Œ) |
| shadcn ì»´í¬ë„ŒíŠ¸ ëˆ„ë½ | ì—†ìŒ | Card, Form, Input, Button, Badge, Separator ëª¨ë‘ ì„¤ì¹˜ í™•ì¸ |
| router.refresh() + revalidatePath ì¤‘ë³µ | ì—†ìŒ | í•™êµ ê´€ë¦¬ì—ì„œë„ ë™ì¼ íŒ¨í„´, ë¬¸ì œ ì—†ìŒ |

---

## 7. í•™ìŠµ ë¶„ë¥˜

| íŒŒì¼ | ë‚œì´ë„ | êµ¬í˜„ ë°©ì‹ |
|------|--------|-----------|
| `page.tsx` | ğŸŸ¢ ROUTINE | AI ìë™ êµ¬í˜„ OK (ê¸°ì¡´ íŒ¨í„´ ë°˜ë³µ) |
| `academy-info-card.tsx` | ğŸŸ¢ ROUTINE | AI ìë™ êµ¬í˜„ OK (ì •ì  ë§ˆí¬ì—… + ê°„ë‹¨ ë³µì‚¬) |
| `academy-form.tsx` | ğŸŸ¡ RECOMMENDED | AI êµ¬í˜„ í›„ í•™ìŠµ ë¦¬ë·° (í¼ íŒ¨í„´ ë³€í˜• ì ìš©) |

### êµ¬í˜„ í›„ í•™ìŠµ í¬ì¸íŠ¸ (MANDATORY)

1. **Server â†’ Client ë°ì´í„° íë¦„**: Server Componentì—ì„œ ì¡°íšŒ â†’ propsë¡œ Clientì— ì „ë‹¬
2. **ì—­í•  ê¸°ë°˜ ì¡°ê±´ë¶€ ë Œë”ë§**: Serverì—ì„œ role í™•ì¸ â†’ ë³´ì•ˆì ìœ¼ë¡œ ì•ˆì „í•œ ë¶„ê¸°
3. **useTransition vs useActionState**: ì™œ useTransitionì„ ì„ íƒí–ˆëŠ”ì§€
4. **null â†” '' ë³€í™˜ ì™•ë³µ**: DB(null) â†’ Form('') â†’ Server Action(null)

---

## 8. êµ¬í˜„ ìˆœì„œ

1. `page.tsx` ì‘ì„± (Server Component, ë°ì´í„° ì¡°íšŒ + ë¶„ê¸°)
2. `academy-info-card.tsx` ì‘ì„± (ì½ê¸° ì „ìš© ì¹´ë“œ)
3. `academy-form.tsx` ì‘ì„± (ìˆ˜ì • í¼)
4. ë¹Œë“œ í™•ì¸ (`npm run build`)

---

## 9. ì‚¬ìš©ì ìŠ¹ì¸ ëŒ€ê¸° í•­ëª©

- [ ] ê³„íš ì „ì²´ ìŠ¹ì¸
- [ ] 00004 ë§ˆì´ê·¸ë ˆì´ì…˜ Cloud ì ìš© ì—¬ë¶€ í™•ì¸ (invite_code ì»¬ëŸ¼)
